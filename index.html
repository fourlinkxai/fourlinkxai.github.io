<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>Fourlinkx AI Chat</title>
<style>
  /* Reset and base */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0; height: 100%;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: #eee;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }

  /* Container fits mobile and desktop */
  #chat-container {
    position: relative;
    background: #1e1e1e;
    width: 100vw;
    max-width: 350px;
    height: 100vh;
    max-height: 600px;
    display: flex;
    flex-direction: column;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.6);
    overflow: hidden;
    /* Background image and overlay handled via pseudo element */
  }

  /* Background image with overlay */
  #chat-container::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background-image: url('https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=60');
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    opacity: 0.25;
    z-index: 0;
    filter: brightness(0.6);
    border-radius: 12px;
  }

  /* Make sure content is above background */
  #chat-container > * {
    position: relative;
    z-index: 1;
  }

  /* Header */
  header {
    background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
    padding: 14px 0;
    color: #fff;
    font-size: 1.35rem;
    font-weight: 700;
    text-align: center;
    user-select: none;
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
    border-radius: 12px 12px 0 0;
  }

  /* Chat messages panel */
  #chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 14px 12px;
    background: rgba(42, 42, 42, 0.85);
    display: flex;
    flex-direction: column;
    gap: 12px;
    scroll-behavior: smooth;
    border-radius: 0 0 12px 12px;
  }

  /* Scrollbar for chat */
  #chat-messages::-webkit-scrollbar {
    width: 8px;
  }
  #chat-messages::-webkit-scrollbar-thumb {
    background: #555;
    border-radius: 4px;
  }
  #chat-messages::-webkit-scrollbar-track {
    background: transparent;
  }

  /* Message bubbles */
  .message {
    max-width: 80%;
    padding: 12px 18px;
    border-radius: 20px;
    line-height: 1.4;
    font-size: 1rem;
    word-wrap: break-word;
    white-space: pre-wrap;
    user-select: text;
    box-shadow: 0 2px 5px rgba(0,0,0,0.3);
  }
  .message.user {
    background: #2575fc;
    color: white;
    align-self: flex-end;
    border-bottom-right-radius: 4px;
  }
  .message.ai {
    background: #444;
    color: #ddd;
    align-self: flex-start;
    border-bottom-left-radius: 4px;
  }

  /* Input area */
  #input-area {
    display: flex;
    padding: 10px 12px;
    background: rgba(34, 34, 34, 0.95);
    border-top: 1px solid #333;
    border-radius: 0 0 12px 12px;
  }
  #input-text {
    flex: 1;
    padding: 12px 16px;
    border-radius: 30px;
    border: none;
    font-size: 1rem;
    outline: none;
    background: #333;
    color: #eee;
    transition: background-color 0.3s ease;
    resize: none;
    min-height: 42px;
    max-height: 100px;
    overflow-y: auto;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  #input-text::placeholder {
    color: #aaa;
  }
  #input-text:focus {
    background: #444;
  }
  #send-button {
    margin-left: 10px;
    background: #2575fc;
    border: none;
    border-radius: 30px;
    width: 50px;
    height: 50px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-shrink: 0;
  }
  #send-button:hover:not(:disabled) {
    background: #1b54d6;
  }
  #send-button:disabled {
    background: #555;
    cursor: not-allowed;
  }

  /* Send icon */
  #send-button svg {
    fill: white;
    width: 24px;
    height: 24px;
  }

  /* Reset chat button */
  #reset-button {
    background: #444;
    border: none;
    border-radius: 30px;
    color: #ddd;
    font-size: 0.9rem;
    padding: 6px 15px;
    margin: 8px auto 12px auto;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
    max-width: 150px;
  }
  #reset-button:hover {
    background: #555;
  }

  /* Responsive tweaks */
  @media (max-width: 350px) {
    #chat-container {
      border-radius: 0;
      max-width: 100vw;
      max-height: 100vh;
      height: 100vh;
      width: 100vw;
    }
    #input-text {
      font-size: 0.95rem;
    }
  }
</style>
</head>
<body>
<div id="chat-container" role="main" aria-label="Fourlinkx AI Chat interface">
  <header>Fourlinkx AI Chat</header>
  <section id="chat-messages" aria-live="polite" aria-relevant="additions" tabindex="0"></section>
  <form id="input-area" aria-label="Send a message to AI" autocomplete="off" novalidate>
    <textarea id="input-text" name="message" placeholder="Type your message..." aria-label="Message input" rows="1" required></textarea>
    <button type="submit" id="send-button" aria-label="Send message" title="Send" disabled>
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false">
        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
      </svg>
    </button>
  </form>
  <button id="reset-button" aria-label="Reset chat" title="Reset chat">Reset Chat</button>
</div>
<script>
  (() => {
    const chatMessages = document.getElementById('chat-messages');
    const inputText = document.getElementById('input-text');
    const sendButton = document.getElementById('send-button');
    const inputForm = document.getElementById('input-area');
    const resetButton = document.getElementById('reset-button');

    function updateSendButtonState() {
      sendButton.disabled = inputText.value.trim().length === 0;
    }

    // Auto-grow textarea height
    function autoGrowTextarea(el) {
      el.style.height = 'auto';
      el.style.height = (el.scrollHeight) + 'px';
    }

    inputText.addEventListener('input', () => {
      updateSendButtonState();
      autoGrowTextarea(inputText);
      scrollChatToBottom();
    });

    updateSendButtonState();
    autoGrowTextarea(inputText);

    function scrollChatToBottom() {
      chatMessages.scrollTo({ top: chatMessages.scrollHeight, behavior: 'smooth' });
    }

    function appendMessage(text, sender, options = {}) {
      const messageDiv = document.createElement('div');
      messageDiv.classList.add('message', sender);
      if (options.typing) {
        messageDiv.textContent = '';
        chatMessages.appendChild(messageDiv);
        simulateTyping(messageDiv, text);
      } else {
        messageDiv.textContent = text;
        chatMessages.appendChild(messageDiv);
      }
      scrollChatToBottom();
      return messageDiv;
    }

    async function simulateTyping(element, text, speed = 40) {
      for (let i = 0; i < text.length; i++) {
        element.textContent += text.charAt(i);
        scrollChatToBottom();
        await new Promise(r => setTimeout(r, speed));
      }
    }

    function randomChoice(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    async function getAIResponse(userMessage) {
      const msg = userMessage.toLowerCase();

      function delay(ms) {
        return new Promise(res => setTimeout(res, ms));
      }

      await delay(800 + Math.random() * 700);

      const greetings = [
        "Hello! How can I assist you today?",
        "Hi there! What would you like to talk about?",
        "Hey! I'm here to help you, ask me anything.",
        "Greetings! How can I be of service?"
      ];
      const howAreYou = [
        "I'm just code, but I'm doing great, thanks!",
        "Feeling helpful as always! What can I do for you?",
        "I'm perfectly operational and ready to chat!",
        "Can't complain, I'm here to assist you!"
      ];
      const nameResponses = [
        "I'm Fourlinkx AI Chat, your friendly virtual assistant.",
        "You can call me Fourlinkx AI Chat.",
        "I'm an AI chat bot designed to help you.",
        "Fourlinkx AI Chat at your service!"
      ];
      const weatherResponses = [
        "I don't have access to live weather data currently.",
        "Wish I could check the weather for you, but I can't.",
        "Sorry, I can't provide weather updates yet.",
        "Weather's a mystery to me, but I hope it's nice!"
      ];
      const helpResponses = [
        "Of course! Ask me anything you'd like help with.",
        "I'm here to assist you with any questions.",
        "Happy to help! What do you want to know?",
        "Feel free to ask me anything, I'm listening."
      ];
      const thankResponses = [
        "You're welcome! Glad to assist.",
        "No problem! Always happy to help.",
        "Anytime! Let me know if you have more questions.",
        "My pleasure! I'm here whenever you need."
      ];
      const fallbackResponses = [
        "That's interesting! Can you tell me more?",
        "I see. What else would you like to discuss?",
        "Good to know! Feel free to ask me anything else.",
        "Hmm, let me think about that... Tell me more.",
        "I appreciate you sharing that! Anything else on your mind?",
        "I'm not sure about that, but I'm learning every day!"
      ];

      if (msg.match(/\b(hello|hi|hey|greetings|sup|yo)\b/)) {
        return randomChoice(greetings);
      }
      if (msg.match(/\b(how are you|how's it going|how do you do)\b/)) {
        return randomChoice(howAreYou);
      }
      if (msg.match(/\b(your name|who (are|r) you|identify yourself)\b/)) {
        return randomChoice(nameResponses);
      }
      if (msg.match(/\b(weather|rain|temperature|forecast)\b/)) {
        return randomChoice(weatherResponses);
      }
      if (msg.match(/\b(help|assist|support|can you do|what can you do|help me)\b/)) {
        return randomChoice(helpResponses);
      }
      if (msg.match(/\b(thank|thanks|thank you|appreciate)\b/)) {
        return randomChoice(thankResponses);
      }
      if (msg.trim() === '') {
        return "Please type something so I can help.";
      }
      return randomChoice(fallbackResponses);
    }

    async function handleSendMessage(e) {
      e.preventDefault();
      const msg = inputText.value.trim();
      if (!msg) return;

      appendMessage(msg, 'user');
      inputText.value = '';
      updateSendButtonState();
      autoGrowTextarea(inputText);

      const aiBubble = appendMessage('', 'ai');

      const aiResponse = await getAIResponse(msg);
      aiBubble.textContent = '';
      await simulateTyping(aiBubble, aiResponse);
    }

    inputForm.addEventListener('submit', handleSendMessage);

    inputText.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        if (!sendButton.disabled) {
          sendButton.click();
        }
      }
    });

    resetButton.addEventListener('click', () => {
      chatMessages.innerHTML = '';
      appendMessage("Welcome! I'm Fourlinkx AI Chat. How can I help you today?", 'ai');
      inputText.value = '';
      updateSendButtonState();
      autoGrowTextarea(inputText);
      inputText.focus();
    });

    appendMessage("Welcome! I'm Fourlinkx AI Chat. How can I help you today?", 'ai');
  })();
</script>
</body>
</html>
