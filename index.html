<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>AI Chat App</title>
<style>
  /* Reset and base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea, #764ba2);
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 10px;
  }

  #chat-app {
    background: #1f1f38;
    width: 350px;
    max-width: 100vw;
    height: 600px;
    max-height: 100vh;
    display: flex;
    flex-direction: column;
    border-radius: 15px;
    box-shadow: 0 15px 30px rgba(0,0,0,0.3);
    overflow: hidden;
  }

  header {
    background: #483d8b;
    padding: 15px;
    color: #ffffff;
    font-size: 1.25rem;
    font-weight: 700;
    text-align: center;
    letter-spacing: 1.5px;
    user-select: none;
  }

  #messages {
    flex: 1;
    padding: 15px;
    overflow-y: auto;
    background: #2a2a46;
    scrollbar-width: thin;
    scrollbar-color: #766fca transparent;
  }
  #messages::-webkit-scrollbar {
    width: 8px;
  }
  #messages::-webkit-scrollbar-track {
    background: transparent;
  }
  #messages::-webkit-scrollbar-thumb {
    background-color: #766fca;
    border-radius: 4px;
  }

  .message {
    max-width: 80%;
    margin-bottom: 12px;
    padding: 10px 14px;
    border-radius: 18px;
    font-size: 0.9rem;
    line-height: 1.3;
    word-wrap: break-word;
    box-shadow: 0 2px 5px rgba(0,0,0,0.15);
    position: relative;
  }

  .message.user {
    background: #6050dc;
    color: #fff;
    margin-left: auto;
    border-bottom-right-radius: 4px;
  }

  .message.ai {
    background: #9a94f8;
    color: #1b1b38;
    margin-right: auto;
    border-bottom-left-radius: 4px;
  }

  .message .time {
    font-size: 0.7rem;
    opacity: 0.6;
    position: absolute;
    bottom: 4px;
    right: 12px;
    font-family: monospace;
  }

  #input-area {
    background: #362e8d;
    padding: 12px 15px;
    display: flex;
    align-items: center;
  }

  #input-area input[type="text"] {
    flex: 1;
    font-size: 1rem;
    border: none;
    border-radius: 20px;
    padding: 10px 18px;
    outline: none;
    margin-right: 12px;
    background: #635bd1;
    color: #fff;
    transition: background 0.3s ease;
  }
  #input-area input[type="text"]::placeholder {
    color: #d0cafc;
  }
  #input-area input[type="text"]:focus {
    background: #7b6fe4;
  }

  #send-btn {
    background: #ff7f50;
    border: none;
    border-radius: 50%;
    width: 44px;
    height: 44px;
    color: #fff;
    font-weight: 700;
    font-size: 1.25rem;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(255,127,80,0.6);
    transition: background 0.3s ease, transform 0.2s ease;
  }
  #send-btn:active {
    transform: scale(0.9);
  }
  #send-btn:disabled {
    background: #caa292;
    cursor: default;
    box-shadow: none;
  }

  @media (max-width: 380px) {
    #chat-app {
      width: 100vw;
      height: 100vh;
      border-radius: 0;
    }
  }
</style>
</head>
<body>
  <div id="chat-app" role="main" aria-label="AI Chat Application">
    <header>AI Chat</header>
    <section id="messages" aria-live="polite" aria-relevant="additions"></section>
    <form id="input-area" aria-label="Send a message">
      <input
        type="text"
        id="message-input"
        placeholder="Type your message..."
        autocomplete="off"
        aria-required="true"
        aria-label="Message text input"
      />
      <button type="submit" id="send-btn" aria-label="Send message" disabled>&#9658;</button>
    </form>
  </div>

<script>
  (() => {
    const messagesContainer = document.getElementById('messages');
    const form = document.getElementById('input-area');
    const input = document.getElementById('message-input');
    const sendBtn = document.getElementById('send-btn');

    // Enable/disable send button based on input
    input.addEventListener('input', () => {
      sendBtn.disabled = input.value.trim().length === 0;
    });

    // Messages storage (for demo only)
    const chatHistory = [];

    // Utility: format time HH:mm
    function formatTime(date) {
      return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
    }

    // Add message to chat display
    function addMessage(text, sender) {
      const msgDiv = document.createElement('div');
      msgDiv.classList.add('message', sender);
      msgDiv.setAttribute('role', 'article');

      // Message text node with accessible text
      const messageText = document.createTextNode(text);
      msgDiv.appendChild(messageText);

      // Time element
      const timeSpan = document.createElement('span');
      timeSpan.classList.add('time');
      timeSpan.textContent = formatTime(new Date());
      msgDiv.appendChild(timeSpan);

      messagesContainer.appendChild(msgDiv);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    // Simulated AI responses (basic demo)
    const aiResponses = [
      "Hello! How can I assist you today?",
      "Can you please elaborate?",
      "That sounds interesting, please tell me more.",
      "I'm not sure I understand, could you clarify?",
      "Thanks for sharing that!",
      "Let's talk about something else. What do you want to discuss?",
      "Can I help with anything else?",
      "I'm here to chat whenever you want!",
      "That's a great question. Let me think.",
      "I'm still learning, but I'll do my best to help."
    ];

    // Generate AI response with random delay
    function generateAIResponse(userMessage) {
      return new Promise((resolve) => {
        // simple keyword based variation (just demo)
        let response = aiResponses[Math.floor(Math.random() * aiResponses.length)];
        if (/hello|hi|hey/i.test(userMessage)) {
          response = "Hi there! How can I help you?";
        } else if (/help|support/i.test(userMessage)) {
          response = "Sure, I'm here to help you. What do you need?";
        }
        // Simulate typing delay between 600ms to 1400ms
        const delay = 600 + Math.random() * 800;
        setTimeout(() => resolve(response), delay);
      });
    }

    // Add user message and get AI response
    async function handleMessage(event) {
      event.preventDefault();
      const text = input.value.trim();
      if (!text) return;

      // Add user message
      addMessage(text, 'user');
      chatHistory.push({ sender: 'user', text });

      input.value = '';
      sendBtn.disabled = true;

      // Show AI "typing..." indicator
      const typingIndicator = document.createElement('div');
      typingIndicator.classList.add('message', 'ai');
      typingIndicator.textContent = 'AI is typing...';
      typingIndicator.setAttribute('aria-live', 'polite');
      messagesContainer.appendChild(typingIndicator);
      messagesContainer.scrollTop = messagesContainer.scrollHeight;

      // Generate AI response
      const aiText = await generateAIResponse(text);

      // Remove typing indicator
      messagesContainer.removeChild(typingIndicator);

      addMessage(aiText, 'ai');
      chatHistory.push({ sender: 'ai', text: aiText });
    }

    form.addEventListener('submit', handleMessage);

    // Initial greeting
    window.addEventListener('load', () => {
      addMessage("Hello! I'm your AI Chatbot. Type your message and press send.", 'ai');
    });
  })();
</script>
</body>
</html>

