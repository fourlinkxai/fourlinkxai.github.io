<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Create AI Images of Yourself</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap');

    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: #1a1a2e;
      color: #e0e0f8;
      max-width: 350px;
      margin: 0 auto;
      padding: 20px 15px;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      overflow: hidden;
    }
    h1 {
      font-weight: 600;
      font-size: 2rem;
      margin-bottom: 8px;
      text-align: center;
      color: #6ee7ff;
      text-shadow: 0 0 6px #24aaffcc;
    }
    p {
      font-weight: 300;
      margin-top: 0;
      margin-bottom: 20px;
      text-align: center;
      font-size: 1rem;
      color: #a5b9dccc;
    }

    /* Upload input */
    .upload-container {
      border: 2px dashed #479be0cc;
      border-radius: 15px;
      padding: 30px 10px;
      text-align: center;
      cursor: pointer;
      color: #479be0cc;
      box-shadow: 0 0 10px #2a7bd9aa;
      transition: border-color 0.3s ease, color 0.3s ease;
    }
    .upload-container:hover {
      border-color: #6ee7ff;
      color: #6ee7ff;
      box-shadow: 0 0 16px #30c3ffcc;
    }
    #fileInput {
      display: none;
    }

    /* Image previews */
    .images-container {
      margin-top: 20px;
      display: flex;
      justify-content: space-around;
      gap: 10px;
      flex-wrap: nowrap;
      overflow-x: auto;
      padding-bottom: 10px;
    }
    figure {
      flex: 0 0 45%;
      margin: 0;
      text-align: center;
      background: #16213e;
      border-radius: 12px;
      box-shadow: 0 5px 15px #1f3a7aaa;
      padding: 10px;
    }
    figure img, canvas {
      max-width: 100%;
      border-radius: 10px;
      display: block;
      margin: 0 auto 8px auto;
      box-shadow: 0 4px 8px #0f255ea8;
      user-select: none;
    }
    figcaption {
      font-weight: 500;
      font-size: 0.9rem;
      color: #7fcfffcc;
    }

    /* Buttons */
    button {
      margin-top: 10px;
      display: block;
      width: 100%;
      font-weight: 600;
      padding: 12px 0;
      background: #48b1ff;
      color: #091f3f;
      border: none;
      border-radius: 16px;
      font-size: 1.1rem;
      cursor: pointer;
      box-shadow: 0 5px 15px #2887c5cc;
      transition: background-color 0.25s ease;
      user-select: none;
    }
    button:hover:not(:disabled) {
      background-color: #2a90f1;
      box-shadow: 0 6px 20px #1f6bc399;
    }
    button:disabled {
      cursor: not-allowed;
      background-color: #2e587e99;
      box-shadow: none;
      color: #a1bbd9cc;
    }

    /* Instructions */
    .instructions {
      font-size: 0.85rem;
      font-weight: 300;
      color: #9db8e0cc;
      text-align: center;
      margin-top: 10px;
      user-select: none;
    }

    /* Scrollbar for images container */
    .images-container::-webkit-scrollbar {
      height: 6px;
    }
    .images-container::-webkit-scrollbar-thumb {
      background-color: #6ee7ffcc;
      border-radius: 4px;
    }

    /* Responsive for small width */
    @media (max-width: 350px) {
      h1 {
        font-size: 1.6rem;
      }
      button {
        font-size: 1rem;
        padding: 10px 0;
      }
      .images-container {
        gap: 8px;
      }
      figure {
        flex-basis: 48%;
      }
    }
  </style>
</head>
<body>

  <h1>Fourlinkx Ai Photo Generator</h1>
  <p>Upload your photo and see an AI-styled artistic transformation applied instantly!</p>

  <label class="upload-container" for="fileInput" tabindex="0" aria-label="Upload your photo">
    Click or tap here to upload your photo
    <input type="file" id="fileInput" accept="image/*" />
  </label>

  <div class="images-container" aria-live="polite" aria-relevant="additions removals">
    <figure id="originalFigure" hidden>
      <img id="originalImage" alt="Original uploaded photo preview" />
      <figcaption>Original Photo</figcaption>
    </figure>
    <figure id="aiFigure" hidden>
      <canvas id="aiCanvas" aria-label="AI generated image"></canvas>
      <figcaption>AI-Generated Image</figcaption>
    </figure>
  </div>

  <button id="generateBtn" disabled aria-disabled="true">Generate AI Image</button>

  <p class="instructions">
    The AI-generated image is simulated in your browser by applying artistic filters. No photo data is uploaded anywhere. So take a screenshot of your photo once created.
  </p>

<script>
  (function() {
    const fileInput = document.getElementById('fileInput');
    const originalImage = document.getElementById('originalImage');
    const aiCanvas = document.getElementById('aiCanvas');
    const originalFigure = document.getElementById('originalFigure');
    const aiFigure = document.getElementById('aiFigure');
    const generateBtn = document.getElementById('generateBtn');

    let img = new Image();
    let imgLoaded = false;

    function reset() {
      originalFigure.hidden = true;
      aiFigure.hidden = true;
      generateBtn.disabled = true;
      generateBtn.setAttribute('aria-disabled', 'true');
      aiCanvas.width = 0;
      aiCanvas.height = 0;
      originalImage.src = '';
      imgLoaded = false;
    }

    function loadImage(file) {
      reset();
      if (!file) return;

      const url = URL.createObjectURL(file);
      img.src = url;

      img.onload = function() {
        URL.revokeObjectURL(url);
        originalImage.src = img.src;
        originalFigure.hidden = false;
        generateBtn.disabled = false;
        generateBtn.setAttribute('aria-disabled', 'false');
        imgLoaded = true;
      };
      img.onerror = () => {
        alert("Failed to load image! Please try another file.");
        reset();
      }
    }

    function applyArtisticFilter() {
      if (!imgLoaded) return;

      // Setup canvas same size as image but max 300px width for mobile fit
      const maxWidth = 300;
      const scale = Math.min(1, maxWidth / img.width);
      const w = Math.floor(img.width * scale);
      const h = Math.floor(img.height * scale);

      aiCanvas.width = w;
      aiCanvas.height = h;

      const ctx = aiCanvas.getContext('2d');
      ctx.clearRect(0, 0, w, h);

      // Draw original image scaled down
      ctx.drawImage(img, 0, 0, w, h);

      // Apply filters for AI effect:
      // A combination of saturate, brightness, blur, and color overlay

      // Get image data for pixel manipulation - simulate "cartoon" effect
      let imageData = ctx.getImageData(0, 0, w, h);
      let data = imageData.data;

      // Simple pixel effect for cartoonish look: edge detection and color quantization
      const threshold = 30;

      function rgbToGray(r, g, b) {
        return 0.299 * r + 0.587 * g + 0.114 * b;
      }

      for (let i = 0; i < data.length; i += 4) {
        // Quantize colors
        data[i] = Math.floor(data[i] / 64) * 64;     // R
        data[i+1] = Math.floor(data[i+1] / 64) * 64; // G
        data[i+2] = Math.floor(data[i+2] / 64) * 64; // B
      }

      // Simple edge detection to darken edges
      for (let y = 1; y < h - 1; y++) {
        for (let x = 1; x < w - 1; x++) {
          let idx = (y * w + x) * 4;
          let centerGray = rgbToGray(data[idx], data[idx+1], data[idx+2]);
          let rightGray = rgbToGray(data[idx + 4], data[idx + 5], data[idx + 6]);
          let downGray = rgbToGray(data[idx + w * 4], data[idx + w * 4 + 1], data[idx + w * 4 + 2]);

          let diff = Math.abs(centerGray - rightGray) + Math.abs(centerGray - downGray);
          if (diff > threshold) {
            // Darken edge pixel
            data[idx] = data[idx+1] = data[idx+2] = 40;
          }
        }
      }

      ctx.putImageData(imageData, 0, 0);

      // Overlay light blue transparent filter for style
      ctx.fillStyle = 'rgba(70, 160, 255, 0.23)';
      ctx.fillRect(0, 0, w, h);

      aiFigure.hidden = false;
    }

    fileInput.addEventListener('change', e => {
      if (e.target.files.length > 0) {
        loadImage(e.target.files[0]);
      }
    });

    generateBtn.addEventListener('click', () => {
      applyArtisticFilter();
      generateBtn.blur();
    });

    // Keyboard accessibility for upload container
    const uploadContainer = document.querySelector('.upload-container');
    uploadContainer.addEventListener('keydown', e => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        fileInput.click();
      }
    });

    reset();
  })();
</script>

</body>
</html>

